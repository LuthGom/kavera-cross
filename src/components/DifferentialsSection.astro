---
import ImageWithFallback from "./ImageWithFallBack.astro";
import parana from "../../public/assets/parana.jpeg";
import catalao from "../../public/assets/catalao.jpeg";
import { Instagram, Mail, MessageCircle } from "lucide-react";
import { union } from "astro:schema";
// Definindo os diferenciais
const differentials = [
  {
    icon: "dumbbell",
    title: "Equipamentos de Última Geração",
    description:
      "Máquinas modernas e bem conservadas para um treino eficiente e seguro",
  },
  {
    icon: "clock",
    title: "Horários Flexíveis",
    description:
      "Funcionamento todos os dias para você montar sua rotina da melhor forma.",
  },
  {
    icon: "users",
    title: "Profissionais Qualificados",
    description: "Equipe especializada para orientar e acompanhar sua evolução",
  },
  {
    icon: "shield",
    title: "Ambiente Seguro",
    description:
      "Protocolos de segurança e limpeza rigorosos para seu bem-estar",
  },
];

// Definindo as imagens da galeria
const galleryImages = [
  "https://images.unsplash.com/photo-1610456756490-0f7069c202d7?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxneW0lMjBlcXVpcG1lbnQlMjB3b3Jrb3V0fGVufDF8fHx8MTc1NjExMTQxNnww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",
  "https://images.unsplash.com/photo-1721394747060-7cfc57104f88?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxmaXRuZXNzJTIwY2VudGVyJTIwaW50ZXJpb3J8ZW58MXx8fHwxNzU2MTYyMDM0fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",
  "https://images.unsplash.com/photo-1602827114685-efbb2717da9f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxwZW9wbGUlMjB0cmFpbmluZyUyMGd5bSUyMGJsYWNrJTIwd2hpdGV8ZW58MXx8fHwxNzU2MTYyMDM0fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",
];

const unidades = [
  {
    img: parana,
    nome: "Unidade Av. Paraná",
    whatsApp: "(37) 9-9928-5790",
    instagram: "kaveracross",
    email: "kaveramusculacao01@gmail.com",
    wppLink: "https://wa.link/97g5ou",
    endereco: {
      src: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3745.0716999241763!2d-44.91965492387908!3d-20.172739945915023!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xa0a4255d0c8a4f%3A0x6a9c5cc3608a604d!2sAv.%20Paran%C3%A1%2C%203401%20-%20Vila%20Belo%20Horizonte%2C%20Divin%C3%B3polis%20-%20MG%2C%2035501-170!5e0!3m2!1sen!2sbr!4v1757472790513!5m2!1sen!2sbr",
      width: "300",
      height: "225",
      style: "border:0;",
      allowfullscreen: "",
      loading: "lazy",
      referrerpolicy: "no-referrer-when-downgrade",
    },
  },
  {
    img: catalao,
    nome: "Unidade Bairro Catalão",
    whatsApp: "(37) 9-9964-2473",
    instagram: "kaveracrosscatalao",
    email: "kaveracatalao@gmail.com",
    wppLink: "https://wa.link/vo8cau",
    endereco: {
      src: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3745.546841269143!2d-44.90425952387977!3d-20.152944545291522!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xa0a5bc18d329f5%3A0xa76a3dec6d792354!2sR.%20Castro%20Alves%2C%20639%20-%20Planalto%2C%20Divin%C3%B3polis%20-%20MG%2C%2035501-205!5e0!3m2!1sen!2sbr!4v1757472286549!5m2!1sen!2sbr",
      width: "300",
      height: "225",
      style: "border:0;",
      allowfullscreen: "",
      loading: "lazy",
      referrerpolicy: "no-referrer-when-downgrade",
    },
  },
];
// Função para renderizar o ícone correto
function getIcon(iconName: string) {
  switch (iconName) {
    case "dumbbell":
      return `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8"><path d="M6.5 6.5h11"></path><path d="M6.5 17.5h11"></path><path d="M6 12h12"></path><path d="M4 7v10"></path><path d="M20 7v10"></path><path d="M2 9v6"></path><path d="M22 9v6"></path></svg>`;
    case "clock":
      return `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>`;
    case "users":
      return `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>`;
    case "shield":
      return `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>`;
    default:
      return "";
  }
}
---

<section id="sobre" class="py-12 md:py-16 bg-white">
  <div class="max-w-7xl mx-auto px-3 sm:px-6 lg:px-8">
    <div class="text-center mb-8 md:mb-12">
      <h2 class="text-2xl sm:text-3xl md:text-4xl text-black mb-3 md:mb-4">
        Por que a <span class="text-blue-600">Kavera</span> é diferente?
      </h2>
      <p
        class="text-lg md:text-xl text-gray-600 max-w-2xl mx-auto px-4 sm:px-0"
      >
        Nossa infraestrutura e metodologia foram pensadas para oferecer a melhor
        experiência fitness
      </p>
    </div>

    <!-- Diferenciais -->
    <div
      class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8 mb-12 md:mb-16"
    >
      {
        differentials.map((item, index) => (
          <div class="text-center px-2">
            <div class="inline-flex items-center justify-center w-14 h-14 md:w-16 md:h-16 bg-blue-600 text-white rounded-full mb-3 md:mb-4">
              <Fragment set:html={getIcon(item.icon)} />
            </div>
            <h3 class="text-lg md:text-xl text-black mb-2">{item.title}</h3>
            <p class="text-sm md:text-base text-gray-600">{item.description}</p>
          </div>
        ))
      }
    </div>

    <!-- Galeria -->
    <div>
      <h2
        class="text-center md:text-3xl font-semibold text-blue-400 py-2 m-4 bg-black max-w-7xl mx-auto"
      >
        NOSSA INFRAESTRUTURA
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-3 sm:gap-4">
        {
          galleryImages.map((unidade, index) => (
            <div class="overflow-hidden rounded-lg shadow-lg">
              <ImageWithFallback
                src={unidade}
                alt={`Infraestrutura Kavera Cross ${index + 1}`}
                className="w-full h-40 sm:h-48 md:h-64 object-cover grayscale hover:grayscale-0 transition-all duration-300 hover:scale-105"
              />
            </div>
          ))
        }
      </div>
    </div>
    <div id="unidades" class="max-w-7xl mx-auto px-3 sm:px-6 mt-10 lg:px-8">
      <div class="text-center md:mb-12">
        <h2
          class="text-center md:text-3xl font-semibold text-white py-2 mb-2 bg-black max-w-6xl mx-auto"
        >
          NOSSAS UNIDADES
        </h2>
      </div>

      <div
        class="grid grid-cols-2 md:grid-cols-2 gap-3 sm:gap-4 justify-center"
      >
        {
          unidades.map((unidade, index) => (
            <div class="flex flex-col items-center bg-white rounded-lg shadow-md overflow-hidden">
              <div class="overflow-hidden">
                <ImageWithFallback
                  src={unidade.img.src}
                  alt={`Infraestrutura Kavera Cross ${index + 1}`}
                  className="w-full h-40 sm:h-48 md:h-64 object-cover grayscale hover:grayscale-0 transition-all duration-300 hover:scale-105"
                />
              </div>

              <div class="p-4 sm:p-6 flex-grow">
                <h4 class="text-lg md:text-xl font-bold text-center bg-black text-blue-600 mb-2">
                  {unidade.nome}
                </h4>
                <p class="text-sm sm:text-base text-gray-700">
                  <a href={unidade.wppLink}>
                    <MessageCircle className="w-5 h-5 inline-block text-green-500" />
                    {unidade.whatsApp}
                  </a>
                </p>
                <p class="text-sm sm:text-base text-gray-700">
                  <a href={`https://www.instagram.com/${unidade.instagram}`}>
                    <Instagram className="w-5 h-5 inline-block text-green-500" />
                    @{unidade.instagram}
                  </a>
                </p>
                <p class="text-sm sm:text-base text-gray-700">
                  <a href={`mailto:${unidade.email}`}>
                    <Mail className="w-5 h-5 inline-block text-green-500" />
                    {unidade.email}
                  </a>
                </p>
                <span>
                  <iframe
                    class="py-4"
                    src={unidade.endereco.src}
                    width={unidade.endereco.width}
                    height={unidade.endereco.height}
                    style={unidade.endereco.style}
                    allowfullscreen={unidade.endereco.allowfullscreen}
                  />
                </span>
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </div>
</section>
