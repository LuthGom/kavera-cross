---
import ImageWithFallback from "./ImageWithFallBack.astro";

// Definindo os planos
const plans = {
  mensais: [
    {
      name: "Plano Mensal 1 (Sem Fidelidade)",
      price: {
        dinheiro: "Pix ou Dinheiro: R$ 90,00",
        cartao: " Débito ou Crédito: R$ 100,00",
      },
      period: "/mês",
      image:
        "https://images.unsplash.com/photo-1602827114685-efbb2717da9f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxwZW9wbGUlMjB0cmFpbmluZyUyMGd5bSUyMGJsYWNrJTIwd2hpdGV8ZW58MXx8fHwxNzU2MTYyMDM0fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",
      features: ["3x na Semana", "Acesso à musculação", "Aplicativo mobile"],
      popular: false,
    },
    {
      name: "Plano Mensal 2 (Sem Fidelidade)",
      price: {
        dinheiro: "Pix ou Dinheiro: R$ 100,00",
        cartao: " Débito ou Crédito: R$ 110,00",
      },
      period: "/mês",
      image:
        "https://images.unsplash.com/photo-1602827114685-efbb2717da9f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxwZW9wbGUlMjB0cmFpbmluZyUyMGd5bSUyMGJsYWNrJTIwd2hpdGV8ZW58MXx8fHwxNzU2MTYyMDM0fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",
      features: [
        "Todos os dias da Semana - 1x ao Dia",
        "Acesso à musculação",

        "Aplicativo mobile",
      ],
      popular: false,
    },
    {
      name: "Plano Mensal 3 (Sem Fidelidade)",
      price: {
        dinheiro: "Pix ou Dinheiro: R$ 140,00",
        cartao: " Débito ou Crédito: R$ 150,00",
      },
      period: "/mês",
      image:
        "https://images.unsplash.com/photo-1602827114685-efbb2717da9f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxwZW9wbGUlMjB0cmFpbmluZyUyMGd5bSUyMGJsYWNrJTIwd2hpdGV8ZW58MXx8fHwxNzU2MTYyMDM0fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",
      features: [
        "Todos os dias da Semana - 1x ao Dia",
        "Acesso à musculação",
        "Aplicativo mobile",
      ],
      popular: false,
    },
  ],
  pacotes: [
    {
      name: "Trimestral",
      price: {
        vista: "R$ 270,00",
        parcelado: "R$ 275,94 (3x de R$ 91,98",
      },
      period: "/mês",
      image:
        "https://images.unsplash.com/photo-1639511205270-2b1ce5b112c6?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxjcm9zc2ZpdCUyMHRyYWluaW5nfGVufDF8fHx8MTc1NjE2MjAzNXww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",
      features: ["Todos os dias 1x ao dia", "Zona de CrossFit"],
      popular: true,
    },
    {
      name: "Semestral",
      price: {
        vista: "R$ 480,00",
        parcelado: "R$ 489,50  (6x de R$ 81,88",
      },
      period: "/mês",
      image:
        "https://images.unsplash.com/photo-1639511205270-2b1ce5b112c6?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxjcm9zc2ZpdCUyMHRyYWluaW5nfGVufDF8fHx8MTc1NjE2MjAzNXww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",
      features: ["Todos os dias 1x ao dia", "Zona de CrossFit"],
      popular: true,
    },
    {
      name: "Anual",
      price: {
        vista: "R$ 900,00",
        parcelado: "R$ 921,09 (12x de R$ 76,75",
      },
      period: "/mês",
      image:
        "https://images.unsplash.com/photo-1639511205270-2b1ce5b112c6?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxjcm9zc2ZpdCUyMHRyYWluaW5nfGVufDF8fHx8MTc1NjE2MjAzNXww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",
      features: ["Todos os dias 1x ao dia", "Zona de CrossFit"],
      popular: true,
    },
  ],
};

// Função para renderizar o ícone de check
function CheckIcon() {
  return `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 sm:w-5 sm:h-5 text-blue-600 mr-2 sm:mr-3 flex-shrink-0"><polyline points="20 6 9 17 4 12"></polyline></svg>`;
}
---

<section id="planos" class="py-12 md:py-16 bg-gray-50">
  <div class="max-w-7xl mx-auto px-3 sm:px-6 lg:px-8">
    <div class="text-center mb-8 md:mb-12">
      <h2 class="text-2xl sm:text-3xl md:text-4xl text-black mb-3 md:mb-4">
        Escolha o Plano Ideal para Você
      </h2>
      <p
        class="text-lg md:text-xl text-gray-600 max-w-2xl mx-auto px-4 sm:px-0"
      >
        Oferecemos opções flexíveis para atender às suas necessidades e
        objetivos fitness
      </p>
    </div>

    <h2
      class="text-center md:text-3xl font-semibold text-blue-400 py-2 m-4 bg-black max-w-6xl mx-auto"
    >
      PLANOS MENSAIS
    </h2>

    <div
      class="grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8 max-w-6xl mx-auto"
    >
      {
        plans.mensais.map((plan, index) => (
          <div
            class={`bg-white rounded-lg shadow-md overflow-hidden ${
              plan.popular ? "ring-2 ring-blue-600" : ""
            } relative flex flex-col`}
          >
            {plan.popular && (
              <div class="absolute top-0 right-0 bg-blue-600 text-white px-4 py-1 text-sm rounded-bl-lg">
                Mais Popular
              </div>
            )}

            <div class="h-40 sm:h-48 overflow-hidden">
              <ImageWithFallback
                src={plan.image}
                alt={`Pessoa treinando - ${plan.name}`}
                className="w-full h-auto object-cover grayscale hover:grayscale-0 transition-all duration-300"
              />
            </div>

            <div class="p-4 sm:p-6 flex flex-col flex-grow">
              <h3 class="text-xl sm:text-2xl text-blue-600 mb-2 font-semibold">
                {plan.name}
              </h3>
              <div class="flex items-end mb-4 sm:mb-6">
                <span class="text-3xl sm:text-2xl text-black font-semibold">
                  {plan.price.dinheiro}
                </span>

                <span class="text-gray-600 ml-1">{plan.period}</span>
              </div>
              <div class="flex items-end mb-4 sm:mb-6">
                <span class="text-3xl sm:text-2xl text-black font-semibold">
                  {plan.price.cartao}
                </span>
                <span class="text-gray-600 ml-1"> {plan.period}</span>
              </div>
              <ul class="space-y-2 sm:space-y-3 mb-6 sm:mb-8">
                {plan.features.map((feature, featureIndex) => (
                  <li
                    class={`flex items-center ${
                      featureIndex === 0 ? "font-extrabold" : ""
                    }`}
                  >
                    <Fragment set:html={CheckIcon()} />
                    <span class="text-sm sm:text-base text-gray-700">
                      {feature}
                    </span>
                  </li>
                ))}
              </ul>
            </div>

            <button
              class={`py-2.5 sm:py-3 text-sm sm:text-base rounded-md transition-colors m-4 sm:m-6 mt-auto ${
                plan.popular
                  ? "bg-blue-600 hover:bg-blue-700 text-white"
                  : "bg-black hover:bg-gray-800 text-white"
              }`}
            >
              Matricule-se!
            </button>
          </div>
        ))
      }
    </div>

    <h2
      class="text-center md:text-3xl font-semibold text-blue-400 py-2 m-4 bg-black max-w-6xl mx-auto"
    >
      PACOTES
    </h2>
    <div
      class="grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8 max-w-6xl mx-auto"
    >
      {
        plans.pacotes.map((plan, index) => (
          <div
            class={`bg-white rounded-lg shadow-md overflow-hidden ${
              plan.popular ? "ring-2 ring-blue-600" : ""
            } relative flex flex-col`}
          >
            {plan.popular && (
              <div class="absolute top-0 right-0 bg-blue-600 text-white px-4 py-1 text-sm rounded-bl-lg">
                Mais Popular
              </div>
            )}

            <div class="h-40 sm:h-48 overflow-hidden">
              <ImageWithFallback
                src={plan.image}
                alt={`Pessoa treinando - ${plan.name}`}
                className="w-full h-auto object-cover grayscale hover:grayscale-0 transition-all duration-300"
              />
            </div>

            <div class="p-4 sm:p-6 flex flex-col flex-grow">
              <h3 class="text-xl sm:text-2xl text-blue-600 mb-2 font-semibold">
                {plan.name}
              </h3>
              <div class="flex items-end mb-4 sm:mb-6">
                <span class="text-3xl sm:text-2xl text-black font-semibold">
                  À Vista: {plan.price.vista}
                </span>
              </div>
              <div class="flex items-end mb-4 sm:mb-6">
                <span class="text-3xl sm:text-2xl text-black font-semibold">
                  Parcelado: {plan.price.parcelado}
                <span class="text-gray-600 ml-1"> {plan.period}</span>
                )
                </span>
              </div>
              <ul class="space-y-2 sm:space-y-3 mb-6 sm:mb-8">
                {plan.features.map((feature, featureIndex) => (
                  <li
                    class={`flex items-center ${
                      featureIndex === 0 ? "font-extrabold" : ""
                    }`}
                  >
                    <Fragment set:html={CheckIcon()} />
                    <span class="text-sm sm:text-base text-gray-700">
                      {feature}
                    </span>
                  </li>
                ))}
              </ul>
            </div>

            <button
              class={`py-2.5 sm:py-3 text-sm sm:text-base rounded-md transition-colors m-4 sm:m-6 mt-auto ${
                plan.popular
                  ? "bg-blue-600 hover:bg-blue-700 text-white"
                  : "bg-black hover:bg-gray-800 text-white"
              }`}
            >
              Matricule-se!
            </button>
          </div>
        ))
      }
    </div>
  </div>
</section>
